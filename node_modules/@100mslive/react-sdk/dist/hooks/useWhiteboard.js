import{__awaiter as i}from"../node_modules/tslib/tslib.es6.mjs.js";import{useState as o,useRef as e,useEffect as r,useCallback as t}from"react";import{selectIsConnectedToRoom as n,selectLocalPeer as l,selectWhiteboard as d,selectAppData as s,selectPermissions as m}from"@100mslive/hms-video-store";import{useHMSStore as v,useHMSActions as u}from"../primitives/HmsRoomProvider.js";const c=(c=!1)=>{var a,f;const p=v(n),b=null===(a=v(l))||void 0===a?void 0:a.customerUserId,w=v(d),h=v(s("disableNotifications")),y=!!(null==w?void 0:w.open),g=(null==w?void 0:w.owner)===b,j=u(),[C,R]=o(!1),_=null===(f=v(m))||void 0===f?void 0:f.whiteboard,P=!!(null==_?void 0:_.includes("admin")),U=e(null);r((()=>{if(!(null==w?void 0:w.url)||!U.current)return;const i=new URL(w.url);(h||c)&&i.searchParams.set("zoom_to_content","true"),U.current.src=i.toString()}),[null==w?void 0:w.url,h,c]),r((()=>{p&&R(j.interactivityCenter.whiteboard.isEnabled)}),[p,j]);const x=t((()=>i(void 0,void 0,void 0,(function*(){p&&P&&(y?g&&(yield j.interactivityCenter.whiteboard.close()):yield j.interactivityCenter.whiteboard.open())}))),[j,g,P,y,p]);return{open:y,isOwner:g,isAdmin:P,iframeRef:U,toggle:C&&P?x:void 0}};export{c as useWhiteboard};
//# sourceMappingURL=useWhiteboard.js.map
